"use strict";(self.webpackChunkreact_spa_template=self.webpackChunkreact_spa_template||[]).push([[305],{305:function(e,t,n){n.r(t),n.d(t,{default:function(){return y}});var r=n(944),a=n(294),i=n(917),o=n(257).Z.create({baseURL:"http://192.168.1.8:8080",headers:{"Content-type":"application/json"}});function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"upload",value:function(e,t){var n=new FormData;return n.append("file",e),o.post("/upload",n,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:t})}},{key:"getFiles",value:function(){return o.get("/files")}}])&&s(t.prototype,n),r&&s(t,r),e}());function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}function p(e,t){return!t||"object"!=((n=t)&&"undefined"!=typeof Symbol&&n.constructor===Symbol?"symbol":typeof n)&&"function"!=typeof t?c(e):t;var n}function d(e,t){return d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},d(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var a=f(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return p(this,n)}}var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(o,e);var t,n,a,i=h(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=i.call(this,e)).selectFile=t.selectFile.bind(c(t)),t.upload=t.upload.bind(c(t)),t.state={selectedFiles:void 0,currentFile:void 0,progress:0,message:"",fileInfos:[]},t}return t=o,(n=[{key:"componentDidMount",value:function(){var e=this;l.getFiles().then((function(t){e.setState({fileInfos:t.data})}))}},{key:"selectFile",value:function(e){this.setState({selectedFiles:e.target.files})}},{key:"upload",value:function(){var e=this,t=this.state.selectedFiles[0];this.setState({progress:0,currentFile:t}),l.upload(t,(function(t){e.setState({progress:Math.round(100*t.loaded/t.total)})})).then((function(t){return e.setState({message:t.data.message}),l.getFiles()})).then((function(t){e.setState({fileInfos:t.data})})).catch((function(){e.setState({progress:0,message:"Could not upload the file!",currentFile:void 0})})),this.setState({selectedFiles:void 0})}},{key:"render",value:function(){var e=this.state,t=e.selectedFiles,n=e.currentFile,a=e.progress,i=e.message,o=e.fileInfos;return(0,r.BX)("div",{children:[n&&(0,r.tZ)("div",{className:"progress",children:(0,r.BX)("div",{className:"progress-bar progress-bar-info progress-bar-striped",role:"progressbar","aria-valuenow":a,"aria-valuemin":"0","aria-valuemax":"100",style:{width:a+"%"},children:[a,"%"]})}),(0,r.tZ)("label",{className:"btn btn-default",children:(0,r.tZ)("input",{type:"file",onChange:this.selectFile})}),(0,r.tZ)("button",{className:"btn btn-success",disabled:!t,onClick:this.upload,children:"Upload"}),(0,r.tZ)("div",{className:"alert alert-light",role:"alert",children:i}),(0,r.BX)("div",{className:"card",children:[(0,r.tZ)("div",{className:"card-header",children:"List of Files"}),(0,r.tZ)("ul",{className:"list-group list-group-flush",children:o&&o.map((function(e,t){return(0,r.BX)("li",{className:"list-group-item",children:[(0,r.tZ)("a",{href:e.url,children:e.name}),(0,r.tZ)("img",{src:e.url,style:{maxWidth:100,maxHeight:100},alt:"sup"})]},t)}))})]})]})}}])&&u(t.prototype,n),a&&u(t,a),o}(a.Component);function b(){var e,t,n=(e=["\n  h1 {\n    font-size: 5rem;\n    font-weight: 600;\n    text-align: center;\n  }\n"],t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}})));return b=function(){return n},n}var m=(0,i.iv)(b()),y=function(){return(0,r.BX)("div",{css:[m],children:[(0,r.tZ)("h1",{className:"title",children:"Upload Files"}),(0,r.tZ)(v,{})]})}}}]);